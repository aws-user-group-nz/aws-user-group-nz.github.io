<div class="about-left">
    <div class="about-submenu">
        <h3>About</h3>
        <nav>
            <a href="#/about/overview" data-about-route="/overview" class="about-nav-link">Overview</a>
            <a href="#/about/committee" data-about-route="/committee" class="about-nav-link">Committee</a>
            <a href="#/about/meetup-leaders" data-about-route="/meetup-leaders" class="about-nav-link">Meetup Leaders</a>
            <a href="#/about/history" data-about-route="/history" class="about-nav-link">Our History</a>
            <a href="#/about/ourconstitution" data-about-route="/ourconstitution" class="about-nav-link">Our Constitution</a>
            <a href="#/about/ourregulations" data-about-route="/ourregulations" class="about-nav-link">Our Regulations</a>
            <a href="#/about/codeofconduct" data-about-route="/codeofconduct" class="about-nav-link">Our Code of Conduct</a>
        </nav>
    </div>
</div>

<div class="middle">
    <div id="about-content">
        <!-- Sub-page content will be loaded here -->
    </div>
</div>

<script>
// About page sub-router
(function() {
    const aboutRoutes = {
        '/overview': 'content/about/overview.html',
        '/committee': 'content/about/committee.html',
        '/meetup-leaders': 'content/about/meetup-leaders.html',
        '/history': 'content/about/history.html',
        '/ourconstitution': 'content/about/ourconstitution.html',
        '/ourregulations': 'content/about/ourregulations.html',
        '/codeofconduct': 'content/about/codeofconduct.html'
    };
    
    let initialized = false;
    
    function initAboutRouter() {
        if (initialized) return;
        
        const aboutContainer = document.getElementById('about-content');
        
        if (!aboutContainer) {
            console.error('About content container not found');
            return;
        }
        
        initialized = true;
        
        async function loadAboutSubPage(subRoute) {
            const contentFile = aboutRoutes[subRoute];
            
            if (contentFile) {
                try {
                    const response = await fetch(contentFile);
                    if (response.ok) {
                        const content = await response.text();
                        aboutContainer.innerHTML = content;
                        updateActiveAboutNav(subRoute);
                    } else {
                        aboutContainer.innerHTML = '<p>Content not found</p>';
                    }
                } catch (error) {
                    console.error('Error loading about sub-page:', error);
                    aboutContainer.innerHTML = '<p>Error loading content</p>';
                }
            }
        }
        
        function updateActiveAboutNav(subRoute) {
            document.querySelectorAll('.about-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`[data-about-route="${subRoute}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        function handleAboutNavigation() {
            const hash = window.location.hash;
            
            // Check if we're on an about sub-page
            if (hash.startsWith('#/about/')) {
                const subRoute = hash.replace('#/about', '');
                loadAboutSubPage(subRoute);
            } else if (hash === '#/about' || hash === '') {
                // Default to overview
                loadAboutSubPage('/overview');
            }
        }
        
        // Listen for hash changes
        window.addEventListener('hashchange', handleAboutNavigation);
        
        // Handle clicks on about nav links
        document.addEventListener('click', (e) => {
            if (e.target.matches('[data-about-route]')) {
                e.preventDefault();
                const subRoute = e.target.getAttribute('data-about-route');
                window.location.hash = `/about${subRoute}`;
            }
        });
        
        // Load initial sub-page
        handleAboutNavigation();
    }
    
    // Listen for the custom event from main router
    window.addEventListener('aboutPageLoaded', initAboutRouter);
    
    // Also try to initialize immediately in case we're already on the page
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAboutRouter, 50);
        });
    } else {
        setTimeout(initAboutRouter, 50);
    }
})();
</script>
